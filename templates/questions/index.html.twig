{% extends 'baseCoach.html.twig' %}

{%block MainContent %}
<link rel="stylesheet" href="{{asset('css/styleTable.css')}}"></style>
			<div class="content ">
				<div class="d-flex align-items-center justify-content-between mb-3 ">

			
				
				<div class="container-fluid p-0">
					<main class="table" id="customers_table">
        <section class="table__header">
             <a href="{{ path('app_exam_index') }}" class="btn btn-primary">Back To Exams</a>
            <h1>Display Questions</h1>
            <div class="input-group">
                <input id="inputSearch" type="search" placeholder="Search Data...">
                <img src="images/search.png" alt="">
            </div>
            <div class="export__file">
                <label for="export-file" class="export__file-btn" title="Export File"></label>
                <input type="checkbox" id="export-file">
                <div class="export__file-options">
                    <label>Export As &nbsp; &#10140;</label>
                    <label for="export-file" id="toPDF">PDF <img src="images/pdf.png" alt=""></label>
                    <label for="export-file" id="toJSON">JSON <img src="images/json.png" alt=""></label>
                    <label for="export-file" id="toCSV">CSV <img src="images/csv.png" alt=""></label>
                    <label for="export-file" id="toEXCEL">EXCEL <img src="images/excel.png" alt=""></label>
                </div>
            </div>
        </section>
        
        <section class="table__body">
			          <a href="{{ path('app_questions_new') }}" class="btn btn-primary">Create new</a>
            <table>
                <thead>
            <tr>
                <th>Question</th>
                <th>Choix1</th>
                <th>Choix2</th>
                <th>Choix3</th>
                <th>Choixcorrect</th>
                <th>Duree</th>
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% for question in questions %}
            <tr>
                <td>{{ question.question }}</td>
                <td>{{ question.choix1 }}</td>
                <td>{{ question.choix2 }}</td>
                <td>{{ question.choix3 }}</td>
                <td>{{ question.choixcorrect }}</td>
                <td>{{ question.duree }}</td>
                <td>
                    <a href="{{ path('app_questions_show', {'id': question.id}) }}"class="btn btn-primary">show</a>
                    <a href="{{ path('app_questions_edit', {'id': question.id}) }}"class="btn btn-primary">edit</a>
                                        {{ include('questions/_delete_form.html.twig') }}
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="8">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
            </table>
                
        </section>
    </main>
	  </div>

    <script src="{{asset('js/scriptTable.js')}}"></script>
    <script>

    const search = document.getElementById('inputSearch'),
    table_rows = document.querySelectorAll('tbody tr'),
    table_headings = document.querySelectorAll('thead th');

search.addEventListener('input', searchTable);
    function searchTable() {
    table_rows.forEach((row, i) => {
        let table_data = row.textContent.toLowerCase(),
            search_data = search.value.toLowerCase();

        row.classList.toggle('hide', table_data.indexOf(search_data) < 0);
        row.style.setProperty('--delay', i / 25 + 's');
    })

    document.querySelectorAll('tbody tr:not(.hide)').forEach((visible_row, i) => {
        visible_row.style.backgroundColor = (i % 2 == 0) ? 'transparent' : '#0000000b';
    });
}
    </script>
<script>
$(document).ready(function(){
    $('#myTable').dataTable();
});
</script> 
					
			</div>

            {# <input type="text" class="recherche" name="" id="myInput" placeholder="cherhcer" oninput="searchFun()"> #}
            <script>
	function searchFun() {
    var input, filter, table, tr, td, i, j, txtValue;
    input = document.getElementById("myInput");
    filter = input.value.toUpperCase();
    table = document.getElementById("myTable");
    tr = table.getElementsByTagName("tr");
    for (i = 1; i < tr.length; i++) {
        // loop through all the td elements of the current row
        for (j = 0; j < tr[i].cells.length; j++) {
            td = tr[i].cells[j];
            if (td) {
                txtValue = td.textContent || td.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                    break; // exit the loop if a match is found
                } else {
                    tr[i].style.display = "none";
                }
            }
        }
    }
}
</script>

{%endblock %}